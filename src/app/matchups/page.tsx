import { supabase } from '@/lib/supabase';import { getPoolWeek } from '@/lib/week'
export const dynamic='force-dynamic'
export default async function Matchups(){const week=getPoolWeek();const[{data:teams},{data}] = await Promise.all([supabase.from('teams').select('id,name'),supabase.from('v_weekly_match_results').select('*').eq('week',week)]);const tmap=new Map(((teams as any[])||[]).map(t=>[t.id,t.name]));const rows=(data as any[])||[];return(<main className='main section'><h1 className='h1'>Week {week} Matchups</h1><div className='card table-wrap'><table className='table'><thead><tr><th className='th'>Home</th><th className='th'>Away</th><th className='th text-right'>Home Pts</th><th className='th text-right'>Away Pts</th></tr></thead><tbody>{rows.map((r,i)=>(<tr key={i} className='border-t border-black/5'><td className='td'>{tmap.get(r.team_a)||'—'}</td><td className='td'>{tmap.get(r.team_b)||'—'}</td><td className='td td-num'>{r.pts_a}</td><td className='td td-num'>{r.pts_b}</td></tr>))}{rows.length===0&&(<tr><td className='td subtle' colSpan={4}>No matchups yet.</td></tr>)}</tbody></table></div></main>)}
